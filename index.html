<!DOCTYPE html>
<html>
    <head>
        <title>LDSController</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
        <link rel="shortcut icon" type="image/x-icon" href="http://myrobothub.com/wp-content/uploads/group-avatars/1/b0e7643f732ba24ecf7f80f0dd8cfb02-bpfull.jpg" />

        <!--Bootstrap CDN-->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


    </head>
    <body>
        <div class="container">
            <h1>LDS Scan Reader</h1>

            <button class="btn btn-danger"  onclick="runMyFunction()">Do Something</button>
            <button class="btn btn-primary"  onclick="setldsrotation()">SET LDS Rotation</button>
            <button class="btn btn-info"  onclick="LDSScan()">Get LDS Scan Data</button>

            <h3>Server Messages</h3>
            <div class="row">
                <div class="col-sm-4">
                    <div id="response"></div>
                </div>
                <div class="col-sm-8">

                    <canvas id="header-canvas" width="600" height="480"></canvas>

                    <div id="LDSScanDataa"></div>
                </div>
            </div>


        </div>
    </body>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.1/socket.io.js"></script>
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="Chart.Core.min.js"></script>
    <script src="Chart.Scatter.min.js"></script>
    <script>

        var socket = io.connect("localhost:3000");


        socket.on('message', function(data){

            document.getElementById("response").innerHTML = data + "<br>";
        });

// draw the robot
        var pos2 = [];
        pos2.push({
            x:0,
            y:0
        });
        pos2.push({
            x:0,
            y:-105
        });
        pos2.push({
            x:0,
            y:245
        });
        pos2.push({
            x:-168,
            y:245
        });
        pos2.push({
            x:168,
            y:245
        });

        socket.on('graph', function(pos){

            var ctx = document.getElementById("header-canvas").getContext("2d");
            var myChart = new Chart(ctx).Scatter([
                { label: "Stuff", data: pos },
                { label: "Robit", data: pos2 } ], {
                showScale: true,
                scaleShowLabels: true,
                scaleShowHorizontalLines: true,
                scaleShowVerticalLines: true,
                scaleLineWidth: 1,
                scaleLineColor: "red",
                scaleGridLineColor: "rgba(0,0,0,.5)",
                datasetPointStrokeColor: 'red',
                scaleGridLineWidth: 1,
                pointDotStrokeWidth: 0,
                pointDot: true,
                scaleType: 'number',
                animation: false,
                // Boolean - Whether to show a stroke for datasets
                datasetStroke: false,
                showTooltips: true,

            });
        });
        for (i = 0; i < myChart.data.datasets[0].data.length; i++) {
            if (myChart.data.datasets[0].data[i] > 100) {
                pointBackgroundColors.push("#90cd8a");
            } else {
                pointBackgroundColors.push("#f58368");
            }
        }
        //calculate things that are too close
        function sendMessage()
        {
            socket.emit('runMyFunction', "test");
        }

        //toggle lds rotation
        function setldsrotation()
        {
            socket.emit('setldsrotation', "test");
        }

        //get data from lds scan
        function LDSScan()
        {
            socket.emit('LDSScan', "test");
        }

    </script>




</html>
